(()=>{"use strict";var t={1270:(t,e,i)=>{i(6981);var s=i(3832);function r(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function n(t,e,i,s,r,n,h){try{var a=t[n](h),p=a.value}catch(t){return void i(t)}a.done?e(p):Promise.resolve(p).then(s,r)}function h(t){return function(){var e=this,i=arguments;return new Promise((function(s,r){var h=t.apply(e,i);function a(t){n(h,s,r,a,p,"next",t)}function p(t){n(h,s,r,a,p,"throw",t)}a(void 0)}))}}function a(t){return p.apply(this,arguments)}function p(){return(p=h(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t){setTimeout(t,e)}));case 2:return i=t.sent,t.abrupt("return",i);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var o={stair0:{x:300,y:50},stair1:{x:270,y:200},stair2:{x:250,y:200},stair3:{x:200,y:100}};(new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),s.Xd.SCALE_MODE=s.aH.NEAREST,this.w=1390,this.h=640,this.canvas=document.getElementById("canvas"),this.stage=new s.W2,this.stage.sortableChildren=!0,this.spritesheetname="images/spritesheet.json",this.renderer=new s.Th({view:this.canvas,width:this.w,height:this.h,resolution:window.devicePixelRatio,autoDensity:!0}),this.loader=s.aN.shared,this.ticker=new s.vB,this.sprites={},this.state={start:!0,showMenu:!1,hammerClicked:!1,menuClicked:!1},window.addEventListener("resize",this.resizeStage.bind(this))}var e,i,n;return e=t,(i=[{key:"start",value:function(){this.loader.add("background","images/back.png").add("decor2","images/dec_2.png").add("stair0","images/stair.png").add("decor1","images/dec_1.png").add("Austin","images/Austin.png").add("logo","images/logo.png").add("btn","images/btn.png").add("hammer","images/icon_hammer.png").add("menuItem1","images/1.png").add("carpet1","images/01.png").add("menuItem2","images/2.png").add("carpet2","images/02.png").add("menuItem3","images/3.png").add("carpet3","images/03.png").add("stair1","images/new_stair_01.png").add("stair2","images/new_stair_02.png").add("stair3","images/new_stair_03.png").add("choosedItem","images/choosed.png").add("ok","images/ok.png").add("final","images/final.png").load(this.initSprites.bind(this))}},{key:"initSprites",value:function(){this.initSprite("background"),this.initSprite("decor2"),this.initSprite("stair0",{x:this.renderer.width+o.stair0.x,y:this.renderer.height+o.stair0.y},{x:1,y:1},this.animateStair),this.initSprite("decor1",{x:this.renderer.width,y:this.renderer.height},{x:1,y:1}),this.initSprite("Austin",{x:this.renderer.width/2-200,y:this.renderer.height/2-100},{x:.5,y:.5}),this.initSprite("logo",{x:20,y:20}),this.initSprite("btn",{x:this.renderer.width/2,y:this.renderer.height-50},{x:.5,y:1},this.resizeSpriteInfinity,this.buttonClick),this.initSprite("hammer",{x:this.renderer.width-100,y:this.renderer.height/2},{x:1,y:1},this.showSprite,this.hammerClick),this.initSprite("menuItem1",{x:this.renderer.width/2+70,y:this.renderer.height/2-200},null,this.animateMenuItem,this.menuClick,!1),this.initSprite("carpet1",{x:this.renderer.width/2+100,y:this.renderer.height/2-230},null,this.animateMenuItem,null,!1),this.initSprite("menuItem2",{x:this.renderer.width/2+220,y:this.renderer.height/2-250},null,this.animateMenuItem,this.menuClick,!1),this.initSprite("carpet2",{x:this.renderer.width/2+250,y:this.renderer.height/2-320},null,this.animateMenuItem,null,!1),this.initSprite("menuItem3",{x:this.renderer.width/2-80,y:this.renderer.height/2-150},null,this.animateMenuItem,this.menuClick,!1),this.initSprite("carpet3",{x:this.renderer.width/2-50,y:this.renderer.height/2-140},null,this.animateMenuItem,null,!1),this.initSprite("ok",null,{x:.5,y:0},this.animateOk,this.clickOk,!1),this.initSprite("final",null,null,this.animateFinal,null,null,!1),this.startGame()}},{key:"initSprite",value:function(t,e,i,r,n,h){this.sprites[t]=new s.jy(this.loader.resources[t].texture),"logo"!==t&&"btn"!==t||(this.sprites[t].zOrder=1e3),this.sprites[t].state=this.state,this.sprites[t].isShowing=void 0===h||h,this.sprites[t].x=e&&e.x?e.x:0,this.sprites[t].y=e&&e.y?e.y:0,this.sprites[t].anchor.x=i?i.x:0,this.sprites[t].anchor.y=i?i.y:0,this.sprites[t].animate=r?r.call(this,t):null,n&&(this.sprites[t].interactive=!0,this.sprites[t].buttonMode=!0,this.sprites[t].on("pointerdown",n.bind(this,t))),this.stage.addChild(this.sprites[t])}},{key:"startGame",value:function(){this.resizeStage(),this.ticker.add(this.animate.bind(this)),this.ticker.start()}},{key:"animateFinal",value:function(t){var e=this;return this.sprites[t].alpha=0,function(){e.sprites[t].isShowing&&(e.sprites[t].alpha+=1===e.sprites[t].alpha?0:.05)}}},{key:"animate",value:function(){var t=Object.keys(this.sprites);for(var e in t)this.sprites[t[e]].animate&&this.sprites[t[e]].animate&&this.sprites[t[e]].animate();this.renderer.render(this.stage)}},{key:"animateMenuItem",value:function(t){var e=this,i=this.sprites[t].width;this.sprites[t].width=0;var s=this.sprites[t].height;return this.sprites[t].height=0,function(){e.sprites[t].visible=e.sprites[t].isShowing,e.sprites[t].visible&&(e.sprites[t].width+=e.sprites[t].width>=i?0:15,e.sprites[t].height+=e.sprites[t].height>=s?0:15)}}},{key:"animateOk",value:function(t){var e=this;return function(){e.sprites[t].visible=e.sprites[t].isShowing}}},{key:"resizeStage",value:function(){var t=Math.min(window.innerWidth/this.w,window.innerHeight/this.h),e=Math.ceil(this.w*t),i=Math.ceil(this.h*t);this.renderer.view.style.width="".concat(e,"px"),this.renderer.view.style.height="".concat(i,"px"),this.renderer.resize(e,i),this.stage.scale.set(t)}},{key:"resizeSpriteInfinity",value:function(t){var e=this,i=0;return function(){i+=.03;var s=Math.abs(Math.sin(i));e.sprites[t].transform.scale.x=.2*s+1,e.sprites[t].transform.scale.y=.05*s+1}}},{key:"showSprite",value:function(t){var e=this,i=this.sprites[t].width,s=this.sprites[t].height;return this.sprites[t].width=0,this.sprites[t].height=0,h(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,a(2e3);case 2:e.sprites[t].isShowing?(e.sprites[t].width+=e.sprites[t].width>=i?0:12,e.sprites[t].height+=e.sprites[t].height>=s?0:15):(e.sprites[t].width-=e.sprites[t].width<=0?0:12,e.sprites[t].height-=e.sprites[t].height<=0?0:15);case 3:case"end":return r.stop()}}),r)})))}},{key:"hideSprite",value:function(t){var e=this;return function(){e.sprites[t].width-=e.sprites[t].width<=0?0:12,e.sprites[t].height-=e.sprites[t].height<=0?0:15}}},{key:"buttonClick",value:function(){this.resetState()}},{key:"clickOk",value:function(){this.sprites.final.isShowing=!0,this.sprites.logo.zIndex=1e3,this.sprites.btn.zIndex=1e3,this.hideMenu()}},{key:"resetState",value:function(){this.sprites.hammer.isShowing=!0,this.hideMenu(),this.changeStair(0),this.sprites.final.isShowing=!1,this.sprites.final.alpha=0}},{key:"hammerClick",value:function(){this.state.showMenu=!0,this.sprites.hammer.isShowing=!1,this.sprites.menuItem1.isShowing=!0,this.sprites.carpet1.isShowing=!0,this.sprites.menuItem2.isShowing=!0,this.sprites.carpet2.isShowing=!0,this.sprites.menuItem3.isShowing=!0,this.sprites.carpet3.isShowing=!0,this.refreshMenuItems()}},{key:"hideMenu",value:function(){this.sprites.menuItem1.isShowing=!1,this.sprites.carpet1.isShowing=!1,this.sprites.menuItem2.isShowing=!1,this.sprites.carpet2.isShowing=!1,this.sprites.menuItem3.isShowing=!1,this.sprites.carpet3.isShowing=!1,this.sprites.ok.isShowing=!1,this.resetMenu()}},{key:"refreshMenuItems",value:function(){for(var t=1;t<=3;t+=1){var e="menuItem".concat(t);this.sprites[e].texture=this.loader.resources[e].texture}}},{key:"resetMenu",value:function(){for(var t=1;t<=3;t+=1)this.sprites["menuItem".concat(t)].width=0,this.sprites["menuItem".concat(t)].height=0,this.sprites["carpet".concat(t)].width=0,this.sprites["carpet".concat(t)].height=0}},{key:"menuClick",value:function(t){var e=t.match(/\d/)[0];this.refreshMenuItems(),this.changeStair(e),this.sprites[t].texture=this.loader.resources.choosedItem.texture,this.sprites.ok.isShowing=!0,this.sprites.ok.x=this.sprites[t].x+this.sprites[t].width/2,this.sprites.ok.y=this.sprites[t].y+this.sprites[t].height}},{key:"changeStair",value:(n=h(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.sprites.stair0.switch=!0,this.sprites.stair0.stairsNum=e;case 2:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"animateStair",value:function(){var t,e=this;return function(){e.sprites.stair0.switch?(t=15,e.sprites.stair0.alpha-=e.sprites.stair0.alpha<=0?0:.1,e.sprites.stair0.alpha<=0&&(e.sprites.stair0.texture=e.loader.resources["stair".concat(e.sprites.stair0.stairsNum)].texture,0===e.sprites.stair0.stairsNum?(e.sprites.stair0.x=e.renderer.width+5,e.sprites.stair0.y=e.renderer.height-80):(e.sprites.stair0.x=e.renderer.width-o["stair".concat(e.sprites.stair0.stairsNum)].x,e.sprites.stair0.y=e.renderer.height-o["stair".concat(e.sprites.stair0.stairsNum)].y),e.sprites.stair0.switch=!1)):(t-=1,e.sprites.stair0.alpha+=e.sprites.stair0.alpha>=1?0:.1,e.sprites.stair0.y+=t>=0?1:0)}}}])&&r(e.prototype,i),t}())).start()}},e={};function i(s){if(e[s])return e[s].exports;var r=e[s]={id:s,loaded:!1,exports:{}};return t[s].call(r.exports,r,r.exports,i),r.loaded=!0,r.exports}i.m=t,i.x=t=>{},i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t={143:0},e=[[1270,86]],s=t=>{},r=(r,n)=>{for(var h,a,[p,o,u,d]=n,c=0,l=[];c<p.length;c++)a=p[c],i.o(t,a)&&t[a]&&l.push(t[a][0]),t[a]=0;for(h in o)i.o(o,h)&&(i.m[h]=o[h]);for(u&&u(i),r&&r(n);l.length;)l.shift()();return d&&e.push.apply(e,d),s()},n=self.webpackChunkpixi=self.webpackChunkpixi||[];function h(){for(var s,r=0;r<e.length;r++){for(var n=e[r],h=!0,a=1;a<n.length;a++){var p=n[a];0!==t[p]&&(h=!1)}h&&(e.splice(r--,1),s=i(i.s=n[0]))}return 0===e.length&&(i.x(),i.x=t=>{}),s}n.forEach(r.bind(null,0)),n.push=r.bind(null,n.push.bind(n));var a=i.x;i.x=()=>(i.x=a||(t=>{}),(s=h)())})(),i.x()})();
//# sourceMappingURL=app.js.map